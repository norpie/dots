#!/usr/bin/env zsh

export DISPLAY=$(cat ~/.cache/display)

# $0
[[ $# -eq 0 ]] && echo "Usage: $(basename $0) [blanking off|on]|[off|on]|[brightness 0-1]|[state]" && exit

[[ $1 == "blanking" ]] && [[ $2 == "off" ]] && xset s off && xset -dpms
[[ $1 == "blanking" ]] && [[ $2 == "on" ]] && xset s on && xset +dpms

[[ $1 == "off" ]] && xset dpms force off
[[ $1 == "on" ]] && xset dpms force on

# $0 brightness $2
[[ $1 == "brightness" ]] &&
    xrandr -q |
    grep "connected" |
    awk '{print $1}' |
    xargs -I {} jrandr --output {} --brightness $2 &&
    exit

# $0 state
[[ $1 == "state" ]] &&
    xset -q |
    grep Monitor |
    awk '{print $3}'

# $0 layout [desktop|laptop]
[[ $1 == "layout" ]] &&
    [[ $2 == "desktop" ]] &&
    xrandr --output DP-2 --mode 1920x1080 --refresh 165.00 --primary --output DP-0 --mode 1920x1080 --left-of DP-2 --output DP-4 --mode 1920x1080 --right-of DP-2
[[ $1 == "layout" ]] &&
    [[ $2 == "laptop" ]] &&
    echo "Not implemented yet."
    # xrandr --output HDMI-1 --off --output eDP-1 --auto
