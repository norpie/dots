#!/usr/bin/env bash

# Hyprctl wrapper that ensures proper environment variables

# Always get the current running instance dynamically
CURRENT_INSTANCE=$(ls /run/user/1000/hypr/ 2>/dev/null | head -1)
if [[ -n "$CURRENT_INSTANCE" ]]; then
    export HYPRLAND_INSTANCE_SIGNATURE="$CURRENT_INSTANCE"
fi

# Set WAYLAND_DISPLAY from cache if available, otherwise use default
if [[ -f ~/.cache/wayland_display ]]; then
    export WAYLAND_DISPLAY=$(cat ~/.cache/wayland_display)
else
    export WAYLAND_DISPLAY="wayland-1"
fi

# Execute the real hyprctl with all arguments passed through
exec /run/current-system/sw/bin/hyprctl "$@"